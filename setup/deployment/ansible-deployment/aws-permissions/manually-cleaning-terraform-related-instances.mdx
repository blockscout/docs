---
title: "Manually Cleaning Terraform Related Instances"
description: AWS cleaning resources
---

<Warning>
If the deployment process was previously successful, you can run `bin/infra destroy`. Additionally, `bin/infra destroy_setup`will delete the DynamoDB table. [More information on destroying infrastructure is available here](/setup/deployment/ansible-deployment/destroying-provisioned-infrastructure).

However, in circumstances that rely on insufficient AWS account rights, the deployment process may fail. In this case, `bin/infra destroy_setup` will not work.

**Additionally, forgetting to clean resources can result in high AWS costs in a short period of time, so it's best to check that all resources have been removed.**

</Warning>

In order to completely manually remove Terraform deployment from AWS you need to clear all related instances of the following services:

* S3
* CodeDeploy
* DynamoDB
* Route 53
* DynamoDB
* VPC
* RDS

### Removing S3 Buckets

1\) In the Find Services box, type in S3 and select **S3, Scalable Storage in the Cloud**.

<Frame caption="Enter S3 in the Find Services Search Box">
  <img src="/images/6474f14b-image.jpeg" />
</Frame>

2\) Find related buckets created by Terraform one by one. You can only delete one at a time. They all will be prefixed with `${prefix}` from the Terraform config file. Select a bucket and click **Delete** button. Confirm the deletion. Continue for all related buckets.

<Frame caption="Select each instance and click Delete. Confirm and repeat for all instances.">
  <img src="/images/93cf44b9-image.jpeg" />
</Frame>

### Removing CodeDeploy Application

1\) In the Find Services box, type in **CodeDeploy** and select.

<Frame caption="Enter in CodeDeploy">
  <img src="/images/1ac9b1c3-image.jpeg" />
</Frame>

2\) Select the **Applications** section in the left menu. Click an application in the list (related to Terraform deployment) to select.

<Frame caption="Go to Applications and click on the instance name">
  <img src="/images/05a54d86-image.jpeg" />
</Frame>

Click the **Delete Application** button and confirm the deletion.

<Frame caption="Delete Application">
  <img src="/images/9f6daecf-image.jpeg" />
</Frame>

### Remove DynamoDB instance

1\) In the Find Services box, type in **DynamoDB** and select.

<Frame caption="Enter DynamoDB">
  <img src="/images/c3f2e079-image.jpeg" />
</Frame>

2\) Remove all related DynamoDBs.

1. Select **Tables** section in the left menu
2. Select related database (typically 1 database per deployment). Select database
3. Click **Delete Table** button.
4. Confirm the deletion.

<Frame caption="Delete the selected table. Repeat if necessary.">
  <img src="/images/dc94d155-image.jpeg" />
</Frame>

### 

1\) In the Find Services box, type in **Route 53** and select.

<Frame caption="Enter Route 53">
  <img src="/images/7734be70-image.jpeg" />
</Frame>

2\) Remove all related Hosted zones.

1. Select hosted zones in left menu.
2. Select related hosted zone.
3. Click **Delete Hosted Zone** button.
4. Confirm the deletion.

<Frame caption="Delete related hosted zones">
  <img src="/images/bcf5cb99-image.jpeg" />
</Frame>

### 

1\) In the Find Services box, type in **VPC** and select.

<Frame caption="Enter and select VPC">
  <img src="/images/94517f44-image.jpeg" />
</Frame>

2\) Remove all related subnets. Select **Subnets** section in the left menu, select all related subnets (usually 1 subnet per deployment). Right mouse click or click **Delete subnet** item in **Actions** menu. Confirm the deletion.

<Frame caption="Select subnet to delete, right click, select Delete subnet and confirm deletion.">
  <img src="/images/df6bbb24-image.jpeg" />
</Frame>

3\) Remove all related route tables. Select **Route tables** section in the left menu, select all related route tables (usually it should be 1 route table for deployment). Right mouse click or click **Delete Route table** item in **Actions** menu. Confirm the deletion.

<Frame caption="Select route table to delete, right click, select Delete Route Table and confirm deletion.">
  <img src="/images/703f533d-image.jpeg" />
</Frame>

4\) Detach all related internet gateways. Select **Internet Gateways** section in the left menu, select all related internet gateways (usually 1 internet gateway per deployment). Right mouse click or click **Detach from VPC** item in **Actions** menu. Confirm the detachment.

<Frame caption="Select internet gateway to detach, right click, select Detach from VPC and confirm.">
  <img src="/images/6ea9d0a8-image.jpeg" />
</Frame>

5\) Remove all related DHCP options sets. Select **DHCP Options Sets** section in the left menu, select all related DHCP options sets (usually 1 DHCP option set per deployment). Right mouse click or click **Delete DHCP options** *set* item in **Actions** menu. Confirm the deletion.

<Frame caption="Select DHCP Option Sets, select set, right click, select Delete DHCP options set and confirm">
  <img src="/images/3a57ee3e-image.jpeg" />
</Frame>

6\) Remove all related Network ACLs. Select **Network ACLs** section in the left menu, select all related Network ACLs (usually 1 Network ACL per deployment). Right mouse click or click **Delete network ACL** item in **Actions** menu. Confirm the deletion.

<Frame caption="Select Network ACLs, select ACL to delete, right click, select Delete network ACL and confirm">
  <img src="/images/a54811b7-image.jpeg" />
</Frame>

7\) Remove all related Security groups. Select **Security Groups** section in the left menu, select all related Security groups (usually 1 Security group for deployment). Right mouse click or click **Delete security group** item in **Actions** menu. Confirm the deletion.

<Frame caption="Go to Security Groups, select security group, right click, select Delete security group, confirm">
  <img src="/images/79c13ce4-image.jpeg" />
</Frame>

8\) Remove all related VPCs. Select **Your VPCs** section in the left menu, select all related VPCs (usually1 VPC for deployment). Right mouse click or click **Delete VPC** item in **Actions** menu. Confirm the deletion.

<Frame caption="Select Your VPCs, select correct VPC, right click, select Delete VPC and confirm">
  <img src="/images/cf228cd8-image.jpeg" />
</Frame>

### 

1\) In the Find Services box, type in **RDS** and select.

<Frame caption="Select RDS">
  <img src="/images/10b029a9-image.jpeg" />
</Frame>

2\) Remove all related subnet groups. Select **Subnet groups** section in the left menu, select all related subnet groups (usually 1 subnet group for deployment). Select subnet group and click **Delete** button. Confirm the deletion.

<Frame caption="Go to Subnet Groups, select the subnet to delete, click the Delete button and confirm">
  <img src="/images/b089cf35-image.jpeg" />
</Frame>

3\) Remove all related RDSs. Select **Databases** section in the left menu, select all related databases (usually 1 database for deployment). Select the Database, go to the **Actions** menu, and select **Delete** from the menu. Confirm the deletion.

<Frame caption="Go to Databases, select the DB to delete, click the Actions menu and select Delete.">
  <img src="/images/57836171-image.jpeg" />
</Frame>

<Tip>
This instruction was moved from [https://forum.poa.network/t/aws-settings-for-blockscout-terraform-deployment/1962](https://forum.poa.network/t/aws-settings-for-blockscout-terraform-deployment/1962)

</Tip>